---
name: broker
packages:
- etcd-cf-service-broker
- jq
templates:
  bin/ctl: bin/ctl
  bin/monit_debugger: bin/monit_debugger
  bin/initialize_etcd_auth.sh: bin/initialize_etcd_auth.sh
  data/properties.sh.erb: data/properties.sh
  helpers/ctl_setup.sh: helpers/ctl_setup.sh
  helpers/ctl_utils.sh: helpers/ctl_utils.sh

provides:
- name: etcd-cf-service-broker
  type: servicebroker
  properties:
  - username
  - password
  - port
  - etcd.public_url
  - etcd.root_username
  - etcd.root_password

properties:
  port:
    description: Listening port for broker http requests
    default: 6000
  username:
    description: Broker basic auth username
    default: broker
  password:
    description: Broker basic auth password

  etcd.public_url:
    description: Host URL used for published binding credentials
    default: ""

  etcd.root_username:
    description: "'root' user for etcd; created automatically if etcd has no users"
    default: root
  etcd.root_password:
    description: "password for root user"
